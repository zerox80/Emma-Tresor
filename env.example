##############################################
# EmmaTresor environment template
# --------------------------------------------
# Copy this file to `.env` (backend) and adjust
# the values for your environment. For the
# frontend, create a matching `.env.local` if
# you need to override Vite variables.
##############################################

###############################
# General backend configuration
###############################

# Turn off in production to disable debug pages
DJANGO_DEBUG=True

# Comma-separated list of hostnames the backend accepts
DJANGO_ALLOWED_HOSTS=127.0.0.1,localhost,nginx,backend

# Origins allowed for CSRF-protected POST/PUT requests
CSRF_TRUSTED_ORIGINS=http://localhost,http://127.0.0.1,http://localhost:5173,http://127.0.0.1:5173

# CRITICAL: Change to a strong unique key in production (min. 50 chars)
# Generate with: python generate_secret_key.py
DJANGO_SECRET_KEY=your-secret-key-here

# SECRET KEY ROTATION SUPPORT (optional)
# During rotation, move your current key to OLD_1, set a new key above
# After grace period (30 days), remove old keys
# DJANGO_SECRET_KEY_OLD_1=
# DJANGO_SECRET_KEY_OLD_2=
# DJANGO_SECRET_KEY_OLD_3=

# Force HTTPS redirects (1/0); enable in production behind TLS
DJANGO_FORCE_SSL=0

# Allow self-service registration flow
ALLOW_USER_REGISTRATION=false

#################################
# Database configuration
#################################

# Use `postgres` when running via Docker compose, otherwise `sqlite`
DB_VENDOR=postgres

# PostgreSQL credentials (used when DB_VENDOR=postgres)
POSTGRES_DB=emmatresor
POSTGRES_USER=emmatresor
POSTGRES_PASSWORD=change-me
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

####################################################
# Automatic superuser creation (entrypoint / scripts)
####################################################

AUTO_CREATE_SUPERUSER=false
DJANGO_SUPERUSER_USERNAME=admin
DJANGO_SUPERUSER_EMAIL=admin@example.com
DJANGO_SUPERUSER_PASSWORD=your-secure-password-here

#################################
# Media & static file configuration
#################################

# Optional: change if you want to store media elsewhere
# DJANGO_MEDIA_ROOT=/app/media
# DJANGO_STATIC_ROOT=/app/staticfiles

#################################
# Frontend integration
#################################

# URL the backend uses for login links sent to the user
EMMATRESOR_FRONTEND_LOGIN_URL=http://localhost:5173/login

# Base URL used when generating QR codes / deep links
EMMATRESOR_FRONTEND_BASE_URL=http://127.0.0.1:5173

#################################
# Vite / frontend environment variables
#################################

# API base path the frontend calls (proxied by Vite/dev server)
VITE_API_BASE_URL=/api

# Optional: JWT cookie configuration (must match settings.py defaults)
JWT_ACCESS_COOKIE_NAME=emmatresor_access_token
JWT_REFRESH_COOKIE_NAME=emmatresor_refresh_token
JWT_REMEMBER_COOKIE_NAME=emmatresor_remember_me
JWT_COOKIE_SECURE=0
JWT_COOKIE_HTTPONLY=1
JWT_COOKIE_SAMESITE=Lax
# Set when deploying behind a custom domain, otherwise leave blank
JWT_COOKIE_DOMAIN=
# Optional: restrict refresh cookie path (defaults to /api/)
JWT_REFRESH_COOKIE_PATH=/api/

# Optional: fully qualified API URL for standalone deployments
# VITE_API_ORIGIN=https://emma.example.com

